<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malleable</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <!-- Draggable title bar region -->
    <div class="titlebar">
      <div class="titlebar-drag"></div>
      <span class="titlebar-title">Malleable</span>
      <div class="titlebar-actions">
        <button class="theme-toggle" id="themeToggle" title="Toggle theme">
          <!-- Sun icon (shown in dark mode) -->
          <svg class="icon-sun" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="4"/>
            <path d="M12 2v2"/><path d="M12 20v2"/>
            <path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/>
            <path d="M2 12h2"/><path d="M20 12h2"/>
            <path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/>
          </svg>
          <!-- Moon icon (shown in light mode) -->
          <svg class="icon-moon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none">
            <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="main-layout">
      <!-- Left panel: Chat -->
      <div class="chat-panel">
        <div class="chat-messages" id="chatMessages">
          <div class="empty-state">
            <div class="empty-state-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
            </div>
            <p class="empty-state-text">Ask me to build something and it will appear on the canvas.</p>
          </div>
        </div>

        <div class="chat-input-area">
          <div class="chat-input-container">
            <textarea
              id="chatInput"
              class="chat-input"
              placeholder="Ask to make changes, @mention files, run /commands"
              rows="1"
            ></textarea>
            <div class="chat-input-footer">
              <div class="chat-input-hints">
                <kbd><span>&#8984;</span>L</kbd> to focus
              </div>
              <button class="send-button" id="sendButton" disabled>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="m5 12 7-7 7 7"/>
                  <path d="M12 19V5"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Resize handle -->
      <div class="resize-handle" id="resizeHandle"></div>

      <!-- Right panel: Canvas -->
      <div class="canvas-panel">
        <div class="canvas-toolbar">
          <div class="canvas-tabs">
            <button class="canvas-tab active">Canvas</button>
          </div>
        </div>
        <div class="canvas-viewport" id="canvasViewport">
          <div class="canvas-world" id="canvasWorld">
            <div class="canvas-empty" id="canvasEmpty">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" opacity="0.3">
                <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/>
                <path d="M3 9h18"/>
                <path d="M9 21V9"/>
              </svg>
              <p>Components will render here</p>
            </div>
            <iframe id="canvasFrame" class="canvas-frame" sandbox="allow-scripts allow-modals" style="display:none"></iframe>
          </div>
          <div class="canvas-overlay" id="canvasOverlay"></div>
          <div class="zoom-indicator" id="zoomIndicator">100%</div>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
